:root{
  --bg1:#5b0f7a; --bg2:#ff5fa1;
  --glass: rgba(255,255,255,0.06);
  --accent-c:#00f0ff; --accent-p:#ff00c8;
  --card-w:1100px; --height:90vh;
}

/* Base */
*{box-sizing:border-box}
html,body{height:100%;margin:0;font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,Arial;-webkit-font-smoothing:antialiased}
body{
  display:flex;align-items:center;justify-content:center;
  background: linear-gradient(120deg,var(--bg1),var(--bg2));
  background-size:400% 400%; animation:grad 24s ease infinite;
  overflow:hidden;
}
@keyframes grad{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}

/* Watermark */
.watermark{
  position:fixed; right:18px; bottom:14px; z-index:9999; display:flex; gap:8px; align-items:center;
  padding:8px 10px; border-radius:999px; background: linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  border:1px solid rgba(255,255,255,0.06); box-shadow:0 8px 30px rgba(0,0,0,0.35); color:#fff; text-decoration:none; font-weight:600;
}
.watermark img{ width:18px; height:18px; border-radius:4px; filter: drop-shadow(0 2px 6px rgba(0,0,0,0.5)); }

/* App */
.app{
  width:min(var(--card-w),96%); height:var(--height); border-radius:18px; padding:20px; position:relative; overflow:hidden; z-index:2;
  background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.015));
  border:1px solid rgba(255,255,255,0.06); box-shadow:0 40px 80px rgba(0,0,0,0.45), inset 0 1px 0 rgba(255,255,255,0.02);
  backdrop-filter: blur(16px) saturate(130%); -webkit-backdrop-filter: blur(16px) saturate(130%); transform-style:preserve-3d;
}
.bg-tilt{ position:absolute; inset:-12%; z-index:0; pointer-events:none; }

/* Orbs (glow) */
.orb{ position:absolute; border-radius:50%; filter: blur(80px); opacity:0.65; pointer-events:none; }
.o1{ width:420px;height:420px; left:-100px; top:-60px; background: rgba(0,240,255,0.12); }
.o2{ width:300px;height:300px; right:-80px; bottom:-80px; background: rgba(255,0,200,0.10); }

/* Header */
.app-head{ display:flex; justify-content:space-between; align-items:center; gap:12px; z-index:3; }
.brand{ display:flex; align-items:center; gap:12px; }
.logo{ width:60px; height:60px; border-radius:12px; display:flex; align-items:center; justify-content:center; font-family:Orbitron; font-weight:700; color:#fff;
       background: linear-gradient(135deg, rgba(0,240,255,0.12), rgba(255,0,200,0.08)); border:1px solid rgba(255,255,255,0.05); }
.title .name{ font-family:Orbitron; font-size:18px; }
.title .sub{ font-size:12px; opacity:0.9; margin-top:3px; }
.status{ padding:8px 12px; border-radius:999px; background: linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border:1px solid rgba(255,255,255,0.03); font-weight:600; }

/* Layout */
.main{ display:flex; gap:18px; height:100%; z-index:2; min-width:0; }
.left{ flex:1.6; display:flex; flex-direction:column; gap:12px; min-width:0; }
.right{ flex:0.9; display:flex; flex-direction:column; gap:12px; min-width:260px; }

/* Messages */
.messages{ flex:1; padding:18px; border-radius:14px; background: linear-gradient(180deg, rgba(0,0,0,0.12), rgba(255,255,255,0.01)); border:1px solid rgba(255,255,255,0.02); overflow:auto; display:flex; flex-direction:column; gap:12px; scroll-behavior:smooth; }
.messages::-webkit-scrollbar{ width:10px; }
.messages::-webkit-scrollbar-thumb{ background: rgba(255,255,255,0.08); border-radius:10px; }

/* Bubble row + avatars */
.bubble-row{ display:flex; gap:12px; align-items:flex-end; }
.avatar{ width:40px; height:40px; border-radius:10px; display:flex; align-items:center; justify-content:center; color:#fff; font-family:Orbitron; font-weight:700; flex-shrink:0; }
.avatar.user{ background: linear-gradient(135deg,#ffb77d,#ff6b9d); border:1px solid rgba(255,255,255,0.06); }
.avatar.milo{ background: linear-gradient(135deg,#86f0ff,#ff7ad9); border:1px solid rgba(255,255,255,0.06); }

/* Message bubbles */
.msg{ max-width:78%; padding:12px 14px; border-radius:12px; box-shadow:0 10px 30px rgba(0,0,0,0.35); word-break:break-word; transform-origin:left top; }
.msg.user{ margin-left:auto; background: linear-gradient(135deg, rgba(0,240,255,0.14), rgba(0,120,255,0.08)); color:#021018; border:1px solid rgba(0,240,255,0.12); animation:sendUp .25s ease; }
.msg.ai{ margin-right:auto; background: linear-gradient(135deg, rgba(255,0,200,0.14), rgba(255,120,160,0.06)); color:#12050b; border:1px solid rgba(255,0,200,0.12); animation:sendUp .25s ease; }
@keyframes sendUp{ from{ transform:translateY(8px); opacity:0 } to{ transform:translateY(0); opacity:1 } }
.meta{ font-size:11px; opacity:0.75; margin-top:8px; }

/* Composer */
.composer{ display:flex; gap:12px; align-items:center; padding:12px; border-radius:12px; z-index:3; background: linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border:1px solid rgba(255,255,255,0.02); }
.input{ flex:1; padding:12px 14px; border-radius:12px; border:none; outline:none; font-size:15px; background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01)); color:#e8fbff; backdrop-filter: blur(6px); box-shadow: 0 6px 30px rgba(0,0,0,0.45); border:2px solid rgba(255,255,255,0.02); transition:box-shadow .12s, transform .12s, border-color .12s; }
.input:focus{ box-shadow: 0 14px 60px rgba(0,240,255,0.12), 0 0 80px rgba(0,240,255,0.04); transform: translateY(-2px); border-color: rgba(0,240,255,0.22); }
.btn{ padding:10px 14px; border-radius:12px; border:none; cursor:pointer; font-weight:700; color:#061018; background: linear-gradient(90deg,var(--accent-c),var(--accent-p)); box-shadow:0 10px 40px rgba(0,0,0,0.45); }
.mini-btn{ width:44px; height:44px; display:inline-flex; align-items:center; justify-content:center; border-radius:10px; border:1px solid rgba(255,255,255,0.04); background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); cursor:pointer; }

/* small UI right panel */
.card{ padding:12px; border-radius:12px; background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border:1px solid rgba(255,255,255,0.02); }
.small{ font-size:13px; opacity:0.9; }
.quick{ display:flex; gap:8px; margin-top:8px; flex-wrap:wrap }
.chip{ padding:8px 10px; border-radius:10px; background: linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border:1px solid rgba(255,255,255,0.03); cursor:pointer; }
.rules-list{ max-height:200px; overflow:auto; margin-top:8px; display:flex; flex-direction:column; gap:8px; }
.rule-item{ display:flex; justify-content:space-between; gap:8px; align-items:center; padding:8px; border-radius:8px; background: rgba(0,0,0,0.06); border:1px solid rgba(255,255,255,0.02); }

/* small input in right panel */
.small-input{ flex:1; padding:8px; border-radius:8px; border:1px solid rgba(255,255,255,0.04); background:transparent; color:#fff }

/* typing indicator */
.typing{ display:inline-block; width:36px; height:18px; position:relative; }
.typing span{ display:inline-block; width:6px; height:6px; background: rgba(255,255,255,0.7); border-radius:50%; margin-right:4px; opacity:0; animation: blink 1s infinite; }
.typing span:nth-child(1){ animation-delay:0s } .typing span:nth-child(2){ animation-delay:.15s } .typing span:nth-child(3){ animation-delay:.3s; margin-right:0; }
@keyframes blink{ 0%{opacity:.12; transform: translateY(0)} 50%{opacity:1; transform: translateY(-4px)} 100%{opacity:.12; transform: translateY(0)} }

/* danger button */
.danger{ background: linear-gradient(90deg,#ff8a8a,#ff5f8d); }

/* footer */
.app-foot{ text-align:center; font-size:12px; opacity:0.85; }

/* responsive */
@media (max-width:980px){ .main{ flex-direction:column; } .right{ order:3; width:100% } .left{ order:1 } .app{ padding:14px; height:95vh } }
